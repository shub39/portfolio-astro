---
import Layout from '../layouts/Layout.astro';
import Footer from '../components/Footer.astro';
import SocialLinks from '../components/SocialLinks.astro';
import ProjectCard from '../components/ProjectCard.astro';

const projects = [
    {
        name: "Rush",
        description: "Search save and share Lyrics like Spotify!",
        github: "https://github.com/shub39/Rush",
        playstore:
            "https://play.google.com/store/apps/details?id=com.shub39.rush.play",
        icon: "https://raw.githubusercontent.com/shub39/Rush/master/fastlane/metadata/android/en-US/images/icon.png",
        screenshots: [
            "https://raw.githubusercontent.com/shub39/Rush/refs/heads/master/fastlane/metadata/android/en-US/images/phoneScreenshots/1.png",
            "https://raw.githubusercontent.com/shub39/Rush/refs/heads/master/fastlane/metadata/android/en-US/images/phoneScreenshots/2.png",
            "https://raw.githubusercontent.com/shub39/Rush/refs/heads/master/fastlane/metadata/android/en-US/images/phoneScreenshots/3.png",
            "https://raw.githubusercontent.com/shub39/Rush/refs/heads/master/fastlane/metadata/android/en-US/images/phoneScreenshots/4.png",
            "https://raw.githubusercontent.com/shub39/Rush/refs/heads/master/fastlane/metadata/android/en-US/images/phoneScreenshots/5.png",
            "https://raw.githubusercontent.com/shub39/Rush/refs/heads/master/fastlane/metadata/android/en-US/images/phoneScreenshots/6.png",
        ],
    },
    {
        name: "Grit",
        description: "A simple TODO list and Habit Tracker for Android",
        github: "https://github.com/shub39/Grit",
        icon: "https://raw.githubusercontent.com/shub39/Grit/master/fastlane/metadata/android/en-US/images/icon.png",
        playstore:
            "https://play.google.com/store/apps/details?id=com.shub39.grit",
        screenshots: [
            "https://raw.githubusercontent.com/shub39/Grit/refs/heads/master/fastlane/metadata/android/en-US/images/phoneScreenshots/1.png",
            "https://raw.githubusercontent.com/shub39/Grit/refs/heads/master/fastlane/metadata/android/en-US/images/phoneScreenshots/2.png",
            "https://raw.githubusercontent.com/shub39/Grit/refs/heads/master/fastlane/metadata/android/en-US/images/phoneScreenshots/3.png",
            "https://raw.githubusercontent.com/shub39/Grit/refs/heads/master/fastlane/metadata/android/en-US/images/phoneScreenshots/4.png",
            "https://raw.githubusercontent.com/shub39/Grit/refs/heads/master/fastlane/metadata/android/en-US/images/phoneScreenshots/5.png",
            "https://raw.githubusercontent.com/shub39/Grit/refs/heads/master/fastlane/metadata/android/en-US/images/phoneScreenshots/6.png",
        ],
    },
    {
        name: "Momentum",
        description: "App to make Montages easily",
        github: "https://github.com/shub39/Momentum",
        playstore: "https://play.google.com/store/apps/details?id=shub39.momentum.play",
        icon: "https://raw.githubusercontent.com/shub39/Momentum/master/fastlane/metadata/android/en-US/images/icon.png",
        screenshots: [
            "https://raw.githubusercontent.com/shub39/Momentum/refs/heads/master/fastlane/metadata/android/en-US/images/phoneScreenshots/1.png",
            "https://raw.githubusercontent.com/shub39/Momentum/refs/heads/master/fastlane/metadata/android/en-US/images/phoneScreenshots/2.png",
            "https://raw.githubusercontent.com/shub39/Momentum/refs/heads/master/fastlane/metadata/android/en-US/images/phoneScreenshots/3.png",
            "https://raw.githubusercontent.com/shub39/Momentum/refs/heads/master/fastlane/metadata/android/en-US/images/phoneScreenshots/4.png",
            "https://raw.githubusercontent.com/shub39/Momentum/refs/heads/master/fastlane/metadata/android/en-US/images/phoneScreenshots/3.png",
            "https://raw.githubusercontent.com/shub39/Momentum/refs/heads/master/fastlane/metadata/android/en-US/images/phoneScreenshots/6.png",
        ],
    },
    {
        name: "Dharmik",
        description:
            "App to browse the Bhaghavad Gita with audio transcriptions",
        github: "https://github.com/shub39/Dharmik",
        icon: "https://raw.githubusercontent.com/shub39/Dharmik/master/fastlane/metadata/android/en-US/images/icon.png",
        playstore:
            "https://play.google.com/store/apps/details?id=com.shub39.dharmik.online",
        screenshots: [
            "https://raw.githubusercontent.com/shub39/Dharmik/refs/heads/master/fastlane/metadata/android/en-US/images/phoneScreenshots/1.png",
            "https://raw.githubusercontent.com/shub39/Dharmik/refs/heads/master/fastlane/metadata/android/en-US/images/phoneScreenshots/2.png",
            "https://raw.githubusercontent.com/shub39/Dharmik/refs/heads/master/fastlane/metadata/android/en-US/images/phoneScreenshots/3.png",
            "https://raw.githubusercontent.com/shub39/Dharmik/refs/heads/master/fastlane/metadata/android/en-US/images/phoneScreenshots/4.png",
        ],
    },
    {
        name: "Plumbus",
        description: "Browse info on the Rick and Morty Universe",
        github: "https://github.com/shub39/Plumbus",
        icon: "https://raw.githubusercontent.com/shub39/Plumbus/master/fastlane/metadata/android/en-US/images/icon.png",
        screenshots: [
            "https://raw.githubusercontent.com/shub39/Plumbus/refs/heads/master/fastlane/metadata/android/en-US/images/phoneScreenshots/1.png",
            "https://raw.githubusercontent.com/shub39/Plumbus/refs/heads/master/fastlane/metadata/android/en-US/images/phoneScreenshots/2.png",
            "https://raw.githubusercontent.com/shub39/Plumbus/refs/heads/master/fastlane/metadata/android/en-US/images/phoneScreenshots/3.png",
            "https://raw.githubusercontent.com/shub39/Plumbus/refs/heads/master/fastlane/metadata/android/en-US/images/phoneScreenshots/4.png",
        ],
    },
];

const projectsWithStars = await Promise.all(
    projects.map(async (project) => {
        const response = await fetch(`https://api.github.com/repos/${new URL(project.github).pathname.substring(1)}`);
        if (response.ok) {
            const data = await response.json();
            return { ...project, stars: data.stargazers_count };
        }
        return { ...project, stars: 0 };
    })
);
---

<Layout title="Shub39 | Android Developer">
    <main>
        <!-- About -->
        <section id="about">
            <h1>Hi, Iâ€™m Shub39 ðŸ‘‹</h1>
            <p>
                I'm a passionate mobile developer and Linux nerd,
                experienced in building beautiful apps with Kotlin and KMP.
                Here are some of my projects
            </p>
            <SocialLinks />
        </section>

        <!-- Apps -->
        <section id="apps">
            <div class="section-header">
                <h2>My Apps</h2>
            </div>
            <div class="project-grid">
                {
                    projectsWithStars.map((project) => (
                        <ProjectCard project={project} />
                    ))
                }
            </div>
        </section>
    </main>

    <div class="pager"></div>

    <Footer />
</Layout>